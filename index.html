<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlamX - Monitoring de Gaz Intelligent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'flamx-blue': '#0066CC',
                        'flamx-green': '#55BB55',
                        'flamx-red': '#CC0000',
                    },
                    animation: {
                        pulse: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .sidebar-icon {
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 300ms;
            position: relative;
        }
        .sidebar-icon.active {
            background-color: #2563EB;
            color: white;
        }
        .sidebar-icon.active::after {
            content: '';
            position: absolute;
            right: 0;
            width: 0.25rem;
            height: 1.5rem;
            background-color: #2563EB;
            border-radius: 0 0.375rem 0.375rem 0;
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .status-green {
            background-color: #F0F9F0;
            color: #2D6A2D;
        }
        .status-red {
            background-color: #FFEBEE;
            color: #990000;
        }
        .status-yellow {
            background-color: #FFF8E1;
            color: #996600;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            border: 1px solid #E5E7EB;
            padding: 1.5rem;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .mini-chart {
            height: 2.5rem;
            width: 100%;
            background: #E0E0E0;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 transition-colors duration-300" id="app-body" x-data="appState()">

    <!-- Login Page -->
    <div x-show="!isLoggedIn" class="w-screen h-screen flex items-center justify-center bg-white">
        <div class="w-full max-w-md mx-4">
            <!-- Logo -->
            <div class="text-center mb-8">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#0066CC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4">
                    <path d="M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"/>
                </svg>
            </div>

            <!-- Login Form -->
            <div x-show="!isRegistering" class="bg-white rounded-lg shadow-xl p-8 space-y-6">
                <h2 class="text-2xl font-bold text-center mb-6">Connexion</h2>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" x-model="loginEmail" placeholder="exemple@flamx.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Mot de passe</label>
                    <input type="password" x-model="loginPassword" placeholder="••••••••" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                
                <button @click="login()" class="w-full bg-flamx-blue text-white py-2 rounded-lg font-semibold hover:bg-flamx-blue/90 transition">
                    Se connecter
                </button>
                
                <div class="text-center">
                    <p class="text-sm text-gray-600">Pas encore de compte?</p>
                    <button @click="isRegistering = true" class="text-flamx-blue hover:text-flamx-blue/80 font-semibold">
                        S'inscrire
                    </button>
                </div>
            </div>

            <!-- Registration Form -->
            <div x-show="isRegistering" class="bg-white rounded-lg shadow-xl p-8 space-y-6">
                <h2 class="text-2xl font-bold text-center mb-6">Inscription</h2>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Nom Complet</label>
                    <input type="text" x-model="registerName" placeholder="Jean Dupont" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" x-model="registerEmail" placeholder="exemple@flamx.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Mot de passe</label>
                    <input type="password" x-model="registerPassword" placeholder="••••••••" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Confirmer le mot de passe</label>
                    <input type="password" x-model="registerPasswordConfirm" placeholder="••••••••" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                
                <button @click="register()" class="w-full bg-flamx-blue text-white py-2 rounded-lg font-semibold hover:bg-flamx-blue/90 transition">
                    S'inscrire
                </button>
                
                <div class="text-center">
                    <p class="text-sm text-gray-600">Vous avez déjà un compte?</p>
                    <button @click="isRegistering = false" class="text-flamx-blue hover:text-flamx-blue/80 font-semibold">
                        Se connecter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App (visible only when logged in) -->
    <div x-show="isLoggedIn">

    <!-- Desktop Layout -->
    <div class="hidden md:flex h-screen" @darkMode.window="$el.closest('body').classList.toggle('dark', $event.detail)">
        
        <!-- Sidebar -->
        <div class="w-20 bg-white border-r border-gray-200 flex flex-col items-center py-8 gap-6">
            <!-- Logo -->
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#0066CC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"/>
            </svg>

            <!-- Navigation -->
            <nav class="flex flex-col gap-4">
                <button @click="currentPage = 'dashboard'" :class="currentPage === 'dashboard' ? 'active' : ''" class="sidebar-icon text-gray-600 hover:text-flamx-blue" title="Dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                </button>
                <button @click="currentPage = 'statistics'" :class="currentPage === 'statistics' ? 'active' : ''" class="sidebar-icon text-gray-600 hover:text-flamx-blue" title="Statistiques">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-no-axes-column-icon lucide-chart-no-axes-column"><path d="M5 21v-6"/><path d="M12 21V3"/><path d="M19 21V9"/></svg>
                </button>
                <button @click="currentPage = 'notifications'" :class="currentPage === 'notifications' ? 'active' : ''" class="sidebar-icon text-gray-600 hover:text-flamx-blue" title="Notifications">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell-plus-icon lucide-bell-plus"><path d="M10.268 21a2 2 0 0 0 3.464 0"/><path d="M15 8h6"/><path d="M18 5v6"/><path d="M20.002 14.464a9 9 0 0 0 .738.863A1 1 0 0 1 20 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 8.75-5.332"/></svg>
                </button>
                <button @click="currentPage = 'billing'" :class="currentPage === 'billing' ? 'active' : ''" class="sidebar-icon text-gray-600 hover:text-flamx-blue" title="Paiement">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-credit-card-icon lucide-credit-card"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
                </button>
                <button @click="currentPage = 'profile'" :class="currentPage === 'profile' ? 'active' : ''" class="sidebar-icon text-gray-600 hover:text-flamx-blue" title="Profil">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-pen-icon lucide-user-round-pen"><path d="M2 21a8 8 0 0 1 10.821-7.487"/><path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/><circle cx="10" cy="8" r="5"/></svg>
                </button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            
            <!-- Header -->
            <div class="bg-white border-b border-gray-200 px-8 py-4 flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <h1 class="text-2xl font-bold">Hello, <span x-text="userName" class="text-flamx-blue">Alexandra</span></h1>
                </div>
                <div class="flex items-center gap-6">
                    <!-- Online Toggle -->
                    <div class="flex items-center gap-3">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" x-model="isOnline" class="rounded">
                            <span class="text-sm font-medium" x-text="isOnline ? 'Online' : 'Offline'" :class="isOnline ? 'text-flamx-green' : 'text-gray-500'"></span>
                        </label>
                    </div>
                    
                    <!-- Avatar -->
                    <div class="w-10 h-10 bg-flamx-blue rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                </div>
            </div>

            <!-- Page Content -->
            <div class="flex-1 overflow-auto flex gap-6 p-8">
                <div class="flex-1">
                    <!-- Dashboard Page -->
                    <div x-show="currentPage === 'dashboard'" class="space-y-6">
                        <div class="grid grid-cols-3 gap-6">
                            <!-- Gas Card -->
                            <div class="card" :class="gasLevel > 50 ? 'border-flamx-red animate-pulse' : ''">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-lg">Gaz (PPM)</h3>
                                    <i class="fas fa-wind text-2xl text-flamx-blue"></i>
                                </div>
                                <div class="text-4xl font-bold mb-4" x-text="formatNumber(gasLevel) + ' PPM'" :class="gasLevel > 50 ? 'text-flamx-red' : 'text-flamx-green'"></div>
                                <div class="status-badge" :class="gasLevel > 50 ? 'status-red' : 'status-green'">
                                    <span class="w-2 h-2 rounded-full" :class="gasLevel > 50 ? 'bg-flamx-red' : 'bg-flamx-green'"></span>
                                    <span x-text="gasLevel > 50 ? 'Alerte' : 'Stable'"></span>
                                </div>
                                <div class="mini-chart mt-4"></div>
                            </div>

                            <!-- Temperature Card -->
                            <div class="card">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-lg">Température</h3>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thermometer-sun-icon lucide-thermometer-sun"><path d="M12 2v2"/><path d="M12 8a4 4 0 0 0-1.645 7.647"/><path d="M2 12h2"/><path d="M20 14.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0z"/><path d="m4.93 4.93 1.41 1.41"/><path d="m6.34 17.66-1.41 1.41"/></svg>
                                </div>
                                <div class="text-4xl font-bold mb-4 text-flamx-blue" x-text="formatNumber(temperature) + '°C'"></div>
                                <div class="status-badge status-green">
                                    <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                    <span>Normal</span>
                                </div>
                                <div class="mini-chart mt-4"></div>
                            </div>

                            <!-- System Health Card -->
                            <div class="card">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-lg">Etat Système</h3>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor-cog-icon lucide-monitor-cog"><path d="M12 17v4"/><path d="m14.305 7.53.923-.382"/><path d="m15.228 4.852-.923-.383"/><path d="m16.852 3.228-.383-.924"/><path d="m16.852 8.772-.383.923"/><path d="m19.148 3.228.383-.924"/><path d="m19.53 9.696-.382-.924"/><path d="m20.772 4.852.924-.383"/><path d="m20.772 7.148.924.383"/><path d="M22 13v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"/><path d="M8 21h8"/><circle cx="18" cy="6" r="3"/></svg>
                                </div>
                                <div class="text-4xl font-bold mb-4 text-flamx-green" x-text="formatNumber(systemHealth) + '%'"></div>
                                <div class="status-badge status-green">
                                    <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                    <span>Optimal</span>
                                </div>
                                <div class="mini-chart mt-4"></div>
                            </div>
                        </div>

                        <!-- Detailed Monitoring -->
                        <div class="card">
                            <h3 class="font-semibold text-lg mb-4">Capteurs Détaillés</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-wind text-flamx-blue"></i>
                                        <span>Capteur Gaz #1</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <span class="font-semibold">45 PPM</span>
                                        <span class="status-badge status-green">
                                            <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                            Actif
                                        </span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-wind text-flamx-blue"></i>
                                        <span>Capteur Gaz #2</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <span class="font-semibold">32 PPM</span>
                                        <span class="status-badge status-green">
                                            <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                            Actif
                                        </span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thermometer-sun-icon lucide-thermometer-sun"><path d="M12 2v2"/><path d="M12 8a4 4 0 0 0-1.645 7.647"/><path d="M2 12h2"/><path d="M20 14.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0z"/><path d="m4.93 4.93 1.41 1.41"/><path d="m6.34 17.66-1.41 1.41"/></svg>
                                        <span>Capteur Température</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <span class="font-semibold">22.5°C</span>
                                        <span class="status-badge status-green">
                                            <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                            Actif
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics Page -->
                    <div x-show="currentPage === 'statistics'" class="space-y-6">
                        <div class="card">
                            <h3 class="font-semibold text-lg mb-4">Statistiques Mensuelles</h3>
                            <div class="h-64 bg-gradient-to-b from-flamx-blue/20 to-transparent rounded-lg flex items-end justify-around p-4">
                                <template x-for="(height, i) in [30, 50, 45, 60, 40, 55, 65, 35, 70, 55, 45, 50]" :key="i">
                                    <div class="flex-1 bg-gradient-to-t from-flamx-blue to-flamx-blue/50 mx-1 rounded-t" :style="`height: ${height}%`"></div>
                                </template>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-6">
                            <div class="card">
                                <h4 class="font-semibold mb-4">Gaz - Statistiques</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600 dark:text-gray-400">Max</span>
                                        <span class="font-semibold">78 PPM</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600 dark:text-gray-400">Moyenne</span>
                                        <span class="font-semibold">42 PPM</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600 dark:text-gray-400">Min</span>
                                        <span class="font-semibold">15 PPM</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <h4 class="font-semibold mb-4">Température - Statistiques</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600 dark:text-gray-400">Max</span>
                                        <span class="font-semibold">28°C</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600 dark:text-gray-400">Moyenne</span>
                                        <span class="font-semibold">22°C</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600 dark:text-gray-400">Min</span>
                                        <span class="font-semibold">18°C</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications Page -->
                    <div x-show="currentPage === 'notifications'" class="space-y-4">
                        <h2 class="text-2xl font-bold mb-6">Notifications</h2>
                        <template x-for="(notif, i) in notifications" :key="i">
                            <div class="card border-l-4" :class="notif.type === 'alert' ? 'border-l-flamx-red' : notif.type === 'warning' ? 'border-l-yellow-500' : 'border-l-flamx-green'">
                                <div class="flex items-start justify-between">
                                    <div class="flex gap-4">
                                        <div class="w-10 h-10 rounded-full flex items-center justify-center" :class="notif.type === 'alert' ? 'bg-flamx-red/20 text-flamx-red' : notif.type === 'warning' ? 'bg-yellow-500/20 text-yellow-500' : 'bg-flamx-green/20 text-flamx-green'">
                                            <i class="fas" :class="notif.icon"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold" x-text="notif.title"></h4>
                                            <p class="text-sm text-gray-600 dark:text-gray-400" x-text="notif.message"></p>
                                            <span class="text-xs text-gray-500 mt-2 block" x-text="notif.time"></span>
                                        </div>
                                    </div>
                                    <button @click="markAsRead(i)" class="text-gray-400 hover:text-gray-600">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>

                    <!-- Billing Page -->
                    <div x-show="currentPage === 'billing'" class="space-y-6">
                        <h2 class="text-2xl font-bold mb-6">Gestion de l'Abonnement</h2>
                        
                        <div class="card">
                            <h3 class="font-semibold text-lg mb-4">Plan Actuel</h3>
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-bold text-xl mb-2">FlamX Pro</h4>
                                    <p class="text-gray-600 dark:text-gray-400 mb-4">Surveillance illimitée, alertes en temps réel</p>
                                    <span class="status-badge status-green">
                                        <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                        Actif
                                    </span>
                                </div>
                                <div class="text-right">
                                    <p class="text-3xl font-bold text-flamx-blue">49€</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">/mois</p>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="font-semibold text-lg mb-4">Formulaire de Paiement</h3>
                            <button @click="showPaymentModal = true" class="w-full bg-flamx-blue text-white py-3 rounded-lg font-semibold hover:bg-flamx-blue/90 transition">
                                Ajouter une Méthode de Paiement
                            </button>
                        </div>

                        <div class="card">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 border-b border-gray-200 dark:border-slate-700">
                                    <div>
                                        <p class="font-medium">Facture #001</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">14 Janvier 2026</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold">49€</span>
                                        <button class="text-flamx-blue hover:text-flamx-blue/80 text-sm">Télécharger</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 border-b border-gray-200 dark:border-slate-700">
                                    <div>
                                        <p class="font-medium">Facture #002</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">14 Décembre 2025</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold">49€</span>
                                        <button class="text-flamx-blue hover:text-flamx-blue/80 text-sm">Télécharger</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Page -->
                    <div x-show="currentPage === 'profile'" class="space-y-6">
                        <h2 class="text-2xl font-bold mb-6">Profil & Paramètres</h2>
                        
                        <div class="card">
                            <h3 class="font-semibold text-lg mb-4">Informations Personnelles</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Nom</label>
                                    <input type="text" x-model="userName" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Email</label>
                                    <input type="email" value="alexandra@flamx.com" disabled class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg opacity-50">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Téléphone</label>
                                    <input type="tel" value="+33 6 12 34 56 78" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg">
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="font-semibold text-lg mb-4">Seuils d'Alerte</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Seuil Gaz (PPM)</label>
                                    <input type="number" x-model.number="gasThreshold" value="50" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Seuil Température (°C)</label>
                                    <input type="number" x-model.number="tempThreshold" value="30" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg">
                                </div>
                            </div>
                        </div>

                        <button @click="saveProfile()" class="w-full bg-flamx-blue text-white py-3 rounded-lg font-semibold hover:bg-flamx-blue/90 transition">
                            Enregistrer les modifications
                        </button>

                        <button @click="logout()" class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition mt-4">
                            Déconnexion
                        </button>
                    </div>
                </div>

                <!-- Right Panel - System Health Overview -->
                <div class="w-80 hidden lg:block space-y-6">
                    <div class="card">
                        <h3 class="font-semibold text-lg mb-6">Résumé Global</h3>
                        
                        <!-- Circular Gauge -->
                        <div class="flex justify-center mb-6">
                            <div class="relative w-40 h-40">
                                <svg class="w-full h-full" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="8" class="text-slate-200 dark:text-slate-700"/>
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="8" 
                                            stroke-dasharray="282.6" 
                                            :stroke-dasharray="`${systemHealth * 2.826} 282.6`"
                                            class="text-flamx-green transition-all duration-500"
                                            stroke-linecap="round"
                                            transform="rotate(-90 50 50)"/>
                                </svg>
                                <div class="absolute inset-0 flex flex-col items-center justify-center">
                                    <span class="text-3xl font-bold" x-text="formatNumber(systemHealth) + '%'"></span>
                                    <span class="text-xs text-gray-600 dark:text-gray-400">Santé</span>
                                </div>
                            </div>
                        </div>

                        <!-- Status Details -->
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-gray-500 rounded-lg">
                                <span class="text-sm">Capteurs Actifs</span>
                                <span class="font-semibold text-flamx-green">3/3</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-gray-500 rounded-lg">
                                <span class="text-sm">Alertes Actives</span>
                                <span class="font-semibold text-flamx-red" x-text="activeAlerts">0</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-gray-500 rounded-lg">
                                <span class="text-sm">Uptime</span>
                                <span class="font-semibold text-flamx-green">99.9%</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Layout -->
    <div class="md:hidden flex flex-col h-screen">
        
        <!-- Mobile Header -->
        <div class="bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 p-4 safe-area-inset-top">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0066CC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"/>
                    </svg>
                    <span class="font-bold">Flamx</span>
                </div>
                <div class="flex items-center gap-3">
                    <button @click="currentPage = 'notifications'" class="relative text-gray-600 dark:text-gray-400 hover:text-flamx-blue">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell-plus-icon lucide-bell-plus"><path d="M10.268 21a2 2 0 0 0 3.464 0"/><path d="M15 8h6"/><path d="M18 5v6"/><path d="M20.002 14.464a9 9 0 0 0 .738.863A1 1 0 0 1 20 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 8.75-5.332"/></svg>
                        <span class="absolute top-0 right-0 w-2 h-2 bg-flamx-red rounded-full"></span>
                    </button>
                </div>
            </div>
            
            <!-- Status Bar -->
            <div class="flex items-center justify-end text-sm">
                <span class="text-gray-600 dark:text-gray-400" x-text="formatNumber(temperature) + '° - Cloudy'"></span>
            </div>
        </div>

        <!-- Mobile Content -->
        <div class="flex-1 overflow-auto p-4 pb-24 safe-area-inset-bottom">
            <!-- Dashboard Tiles -->
            <div x-show="currentPage === 'dashboard'" class="space-y-4">
                <!-- Gas Card -->
                <div class="card" :class="gasLevel > 50 ? 'border-flamx-red animate-pulse' : ''">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Gaz</p>
                            <p class="text-3xl font-bold" x-text="formatNumber(gasLevel) + ' PPM'" :class="gasLevel > 50 ? 'text-flamx-red' : 'text-flamx-green'"></p>
                        </div>
                        <div class="w-12 h-12 rounded-lg flex items-center justify-center" :class="gasLevel > 50 ? 'bg-flamx-red text-white' : 'bg-flamx-blue text-white'">
                            <i class="fas fa-wind text-xl"></i>
                        </div>
                    </div>
                    <div class="status-badge mb-3" :class="gasLevel > 50 ? 'status-red' : 'status-green'">
                        <span class="w-2 h-2 rounded-full" :class="gasLevel > 50 ? 'bg-flamx-red' : 'bg-flamx-green'"></span>
                        <span x-text="gasLevel > 50 ? 'Alerte' : 'Stable'"></span>
                    </div>
                    <svg class="w-full h-12 mt-3" viewBox="0 0 100 30" preserveAspectRatio="none">
                        <polyline points="0,20 10,15 20,18 30,12 40,16 50,10 60,14 70,8 80,12 90,10 100,6" fill="none" stroke="currentColor" stroke-width="1" class="text-flamx-blue/50"/>
                    </svg>
                </div>

                <!-- Temperature Card -->
                <div class="card">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Température</p>
                            <p class="text-3xl font-bold text-flamx-blue" x-text="formatNumber(temperature) + '°C'"></p>
                        </div>
                        <div class="w-12 h-12 rounded-lg bg-flamx-blue text-white flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thermometer-sun-icon lucide-thermometer-sun"><path d="M12 2v2"/><path d="M12 8a4 4 0 0 0-1.645 7.647"/><path d="M2 12h2"/><path d="M20 14.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0z"/><path d="m4.93 4.93 1.41 1.41"/><path d="m6.34 17.66-1.41 1.41"/></svg>
                        </div>
                    </div>
                    <div class="status-badge status-green mb-3">
                        <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                        <span>Normal</span>
                    </div>
                    <svg class="w-full h-12 mt-3" viewBox="0 0 100 30" preserveAspectRatio="none">
                        <polyline points="0,15 10,12 20,14 30,10 40,13 50,11 60,14 70,12 80,15 90,13 100,15" fill="none" stroke="currentColor" stroke-width="1" class="text-flamx-green/50"/>
                    </svg>
                </div>

                <!-- System Health Card -->
                <div class="card">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Etat Système</p>
                            <p class="text-3xl font-bold text-flamx-green" x-text="formatNumber(systemHealth) + '%'"></p>
                        </div>
                        <div class="w-12 h-12 rounded-lg bg-flamx-green text-white flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor-cog-icon lucide-monitor-cog"><path d="M12 17v4"/><path d="m14.305 7.53.923-.382"/><path d="m15.228 4.852-.923-.383"/><path d="m16.852 3.228-.383-.924"/><path d="m16.852 8.772-.383.923"/><path d="m19.148 3.228.383-.924"/><path d="m19.53 9.696-.382-.924"/><path d="m20.772 4.852.924-.383"/><path d="m20.772 7.148.924.383"/><path d="M22 13v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"/><path d="M8 21h8"/><circle cx="18" cy="6" r="3"/></svg>
                        </div>
                    </div>
                    <div class="status-badge status-green mb-3">
                        <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                        <span>Optimal</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-500 rounded-full h-2 mt-3">
                        <div class="bg-flamx-green h-2 rounded-full" :style="`width: ${systemHealth}%`"></div>
                    </div>
                </div>

                <!-- Detailed Sensors -->
                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Capteurs Détaillés</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-wind text-flamx-blue"></i>
                                <span class="text-sm">Capteur Gaz #1</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="font-semibold text-sm">45 PPM</span>
                                <span class="status-badge status-green">
                                    <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                    Actif
                                </span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-gray-500 rounded-lg">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-wind text-flamx-blue"></i>
                                <span class="text-sm">Capteur Gaz #2</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="font-semibold text-sm">32 PPM</span>
                                <span class="status-badge status-green">
                                    <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                    Actif
                                </span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-slate-50 dark:bg-gray-500 rounded-lg">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-thermometer-half text-flamx-blue"></i>
                                <span class="text-sm">Capteur Température</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="font-semibold text-sm">22.5°C</span>
                                <span class="status-badge status-green">
                                    <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                    Actif
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notifications on Mobile -->
            <div x-show="currentPage === 'notifications'" class="space-y-4">
                <h2 class="text-xl font-bold mb-4">Notifications</h2>
                <template x-for="(notif, i) in notifications" :key="i">
                    <div class="card border-l-4" :class="notif.type === 'alert' ? 'border-l-flamx-red' : 'border-l-flamx-green'">
                        <div class="flex gap-3">
                            <div class="w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center" :class="notif.type === 'alert' ? 'bg-flamx-red/20 text-flamx-red' : 'bg-flamx-green/20 text-flamx-green'">
                                <i class="fas" :class="notif.icon"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-sm" x-text="notif.title"></h4>
                                <p class="text-xs text-gray-600 dark:text-gray-400" x-text="notif.message"></p>
                                <span class="text-xs text-gray-500 mt-1 block" x-text="notif.time"></span>
                            </div>
                            <button @click="markAsRead(i)" class="text-gray-400 hover:text-gray-600 flex-shrink-0">
                                <i class="fas fa-times text-sm"></i>
                            </button>
                        </div>
                    </div>
                </template>
            </div>

            <!-- Other Pages on Mobile -->
            <div x-show="currentPage === 'statistics'" class="space-y-4">
                <h2 class="text-xl font-bold mb-4">Statistiques</h2>
                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Gaz - Statistiques</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Max</span>
                            <span class="font-semibold">78 PPM</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Moyenne</span>
                            <span class="font-semibold">42 PPM</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Min</span>
                            <span class="font-semibold">15 PPM</span>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Température - Statistiques</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Max</span>
                            <span class="font-semibold">28°C</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Moyenne</span>
                            <span class="font-semibold">22°C</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600 dark:text-gray-400">Min</span>
                            <span class="font-semibold">18°C</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Billing on Mobile -->
            <div x-show="currentPage === 'billing'" class="space-y-4">
                <h2 class="text-xl font-bold mb-4">Abonnement</h2>
                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Plan Actuel</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-bold text-lg mb-2">FlamX Pro</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Surveillance illimitée, alertes en temps réel</p>
                            <span class="status-badge status-green">
                                <span class="w-2 h-2 rounded-full bg-flamx-green"></span>
                                Actif
                            </span>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-flamx-blue">49€</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">/mois</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Historique des Factures</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 border-b border-gray-200 dark:border-slate-700">
                            <div>
                                <p class="font-medium text-sm">Facture #001</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">14 Janvier 2026</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="font-semibold">49€</span>
                                <button class="text-flamx-blue hover:text-flamx-blue/80 text-xs">Dl</button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3">
                            <div>
                                <p class="font-medium text-sm">Facture #002</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">14 Décembre 2025</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="font-semibold">49€</span>
                                <button class="text-flamx-blue hover:text-flamx-blue/80 text-xs">Dl</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile on Mobile -->
            <div x-show="currentPage === 'profile'" class="space-y-4">
                <h2 class="text-2xl font-bold mb-6">Profil & Paramètres</h2>
                
                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Informations</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">Nom</label>
                            <input type="text" x-model="userName" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Email</label>
                            <input type="email" value="alexandra@flamx.com" disabled class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg opacity-50 text-sm">
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="font-semibold text-lg mb-4">Seuils d'Alerte</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">Seuil Gaz (PPM)</label>
                            <input type="number" x-model.number="gasThreshold" value="50" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Seuil Température (°C)</label>
                            <input type="number" x-model.number="tempThreshold" value="30" class="w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-sm">
                        </div>
                    </div>
                </div>

                <button @click="saveProfile()" class="w-full bg-flamx-blue text-white py-2 rounded-lg font-semibold hover:bg-flamx-blue/90 transition">
                    Enregistrer
                </button>

                <button @click="logout()" class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition">
                    Déconnexion
                </button>
            </div>
        </div>

        <!-- Mobile Bottom Navigation -->
        <div class="fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-slate-700 safe-area-inset-bottom">
            <div class="flex items-center justify-around h-20">
                <button @click="currentPage = 'dashboard'" :class="currentPage === 'dashboard' ? 'text-flamx-blue' : 'text-gray-600 dark:text-gray-400'" class="flex flex-col items-center gap-1 py-2 px-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                    <span class="text-xs font-medium">Dashboard</span>
                </button>
                <button @click="currentPage = 'statistics'" :class="currentPage === 'statistics' ? 'text-flamx-blue' : 'text-gray-600 dark:text-gray-400'" class="flex flex-col items-center gap-1 py-2 px-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-no-axes-column-icon lucide-chart-no-axes-column"><path d="M5 21v-6"/><path d="M12 21V3"/><path d="M19 21V9"/></svg>
                    <span class="text-xs font-medium">Stats</span>
                </button>
                <button @click="currentPage = 'profile'" :class="currentPage === 'profile' ? 'text-flamx-blue' : 'text-gray-600 dark:text-gray-400'" class="flex flex-col items-center gap-1 py-2 px-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-pen-icon lucide-user-round-pen"><path d="M2 21a8 8 0 0 1 10.821-7.487"/><path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/><circle cx="10" cy="8" r="5"/></svg>
                    <span class="text-xs font-medium">Profil</span>
                </button>
            </div>
        </div>
    </div>

    </div> <!-- End of Main App -->

    <!-- Payment Modal -->
    <div x-show="showPaymentModal" x-transition class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showPaymentModal = false" style="display: none;">
        <div x-show="showPaymentModal" x-transition class="bg-white dark:bg-slate-800 rounded-lg shadow-xl w-96 p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold">Formulaire de Paiement</h2>
                <button @click="showPaymentModal = false" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6l-12 12M6 6l12 12"/></svg>
                </button>
            </div>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Titulaire de la Carte</label>
                    <input type="text" placeholder="Jean Dupont" class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Numéro de Carte</label>
                    <input type="text" placeholder="1234 5678 9012 3456" maxlength="19" class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Date d'Expiration</label>
                        <input type="text" placeholder="MM/YY" maxlength="5" class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">CVV</label>
                        <input type="text" placeholder="123" maxlength="3" class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Code Postal</label>
                    <input type="text" placeholder="75001" class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-flamx-blue">
                </div>
                <div class="flex items-center gap-3 pt-2">
                    <input type="checkbox" id="terms-modal" class="rounded">
                    <label for="terms-modal" class="text-sm">Je confirme ce paiement de <span class="font-semibold">49€</span></label>
                </div>
                <button type="submit" @click="showPaymentModal = false; alert('Paiement effectué avec succès!')" class="w-full bg-flamx-blue text-white py-2 rounded-lg font-semibold hover:bg-flamx-blue/90 transition">
                    Effectuer le Paiement
                </button>
                <button type="button" @click="showPaymentModal = false" class="w-full bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-white py-2 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-slate-600 transition">
                    Annuler
                </button>
            </form>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        // Initialize dark mode based on system preference
        document.addEventListener('DOMContentLoaded', () => {
            const appBody = document.getElementById('app-body');
            // Check system preference, default to light mode
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                appBody.classList.add('dark');
            } else {
                appBody.classList.remove('dark');
            }
        });

        function appState() {
            return {
                isLoggedIn: false,
                isRegistering: false,
                loginEmail: '',
                loginPassword: '',
                registerName: '',
                registerEmail: '',
                registerPassword: '',
                registerPasswordConfirm: '',
                currentPage: 'dashboard',
                isOnline: true,
                showPaymentModal: false,
                userName: 'Alexandra',
                gasLevel: 45,
                temperature: 22,
                systemHealth: 95,
                activeAlerts: 0,
                gasThreshold: 50,
                tempThreshold: 30,
                notifications: [
                    {
                        id: 1,
                        type: 'info',
                        icon: 'fa-check-circle',
                        title: 'Système opérationnel',
                        message: 'Tous les capteurs fonctionnent normalement',
                        time: 'Il y a 5 min'
                    },
                    {
                        id: 2,
                        type: 'alert',
                        icon: 'fa-exclamation-triangle',
                        title: 'Maintenance programmée',
                        message: 'Révision des capteurs prévue le 20 janvier',
                        time: 'Il y a 2 h'
                    }
                ],
                init() {
                    // Simuler les changements de valeurs
                    setInterval(() => {
                        if (this.isOnline) {
                            this.gasLevel = Math.max(20, Math.min(80, this.gasLevel + (Math.random() - 0.5) * 5));
                            this.temperature = Math.max(18, Math.min(30, this.temperature + (Math.random() - 0.5) * 0.5));
                            this.systemHealth = Math.max(80, Math.min(100, this.systemHealth + (Math.random() - 0.5)));
                        }
                    }, 3000);
                },
                login() {
                    if (this.loginEmail && this.loginPassword) {
                        this.isLoggedIn = true;
                        this.userName = this.loginEmail.split('@')[0];
                        this.loginEmail = '';
                        this.loginPassword = '';
                        alert('Connexion réussie!');
                    } else {
                        alert('Veuillez remplir tous les champs');
                    }
                },
                register() {
                    if (this.registerName && this.registerEmail && this.registerPassword && this.registerPasswordConfirm) {
                        if (this.registerPassword !== this.registerPasswordConfirm) {
                            alert('Les mots de passe ne correspondent pas');
                            return;
                        }
                        this.isLoggedIn = true;
                        this.userName = this.registerName;
                        this.isRegistering = false;
                        this.registerName = '';
                        this.registerEmail = '';
                        this.registerPassword = '';
                        this.registerPasswordConfirm = '';
                        alert('Inscription réussie!');
                    } else {
                        alert('Veuillez remplir tous les champs');
                    }
                },
                logout() {
                    if (confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
                        this.isLoggedIn = false;
                        this.userName = '';
                        alert('Déconnexion réussie');
                    }
                },
                triggerAlert() {
                    const alert = {
                        id: this.notifications.length + 1,
                        type: 'alert',
                        icon: 'fa-exclamation-circle',
                        title: 'Alerte manuelle déclenchée',
                        message: 'Une alerte manuelle a été générée',
                        time: 'À l\'instant'
                    };
                    this.notifications.unshift(alert);
                    this.activeAlerts++;
                    setTimeout(() => {
                        this.activeAlerts = Math.max(0, this.activeAlerts - 1);
                    }, 5000);
                },
                markAsRead(index) {
                    this.notifications.splice(index, 1);
                },
                saveProfile() {
                    alert(`Profil mis à jour!\nNom: ${this.userName}\nSeuil Gaz: ${this.gasThreshold} PPM\nSeuil Temp: ${this.tempThreshold}°C`);
                }
            };
        }

        // Real-time data simulation
        setInterval(() => {
            const app = document.querySelector('[x-data]');
            if (app && app.__x) {
                const data = app.__x.$data;
                if (data.isOnline) {
                    data.gasLevel = Math.max(20, Math.min(80, data.gasLevel + (Math.random() - 0.5) * 10));
                    data.temperature = Math.max(15, Math.min(35, data.temperature + (Math.random() - 0.5) * 3));
                    data.systemHealth = Math.max(80, Math.min(100, data.systemHealth + (Math.random() - 0.5) * 5));
                }
            }
        }, 3000);
    </script>
</body>
</html>
